# üìã Documentaci√≥n T√©cnica del Sistema
## Sistema de Detecci√≥n de Gestos con Manos v1.0

---

## üìë √çndice

1. [Resumen Ejecutivo](#resumen-ejecutivo)
2. [Arquitectura del Sistema](#arquitectura-del-sistema)
3. [Especificaci√≥n de Funcionalidades](#especificaci√≥n-de-funcionalidades)
4. [An√°lisis de Componentes](#an√°lisis-de-componentes)
5. [Flujo de Datos](#flujo-de-datos)
6. [Matriz de Dependencias](#matriz-de-dependencias)
7. [Casos de Uso](#casos-de-uso)
8. [Requisitos No Funcionales](#requisitos-no-funcionales)
9. [Seguridad y Privacidad](#seguridad-y-privacidad)

---

## üéØ Resumen Ejecutivo

### Prop√≥sito del Sistema
Sistema de visi√≥n por computadora que permite el control hands-free de un ordenador mediante reconocimiento de gestos de manos en tiempo real, utilizando t√©cnicas de Machine Learning y procesamiento de video.

### Alcance Funcional
- **Entrada:** Stream de video desde webcam (640x480 m√≠nimo, 30 FPS recomendado)
- **Procesamiento:** Detecci√≥n ML de 21 puntos de referencia por mano + clasificaci√≥n geom√©trica
- **Salida:** Ejecuci√≥n de comandos del sistema operativo
- **Plataformas:** Windows 10/11, Linux (Ubuntu 20.04+, Debian 11+, Fedora 35+)

### Indicadores Clave
| KPI | Objetivo | Actual |
|-----|----------|--------|
| Tasa de detecci√≥n | >90% | ~95% |
| Latencia total | <150ms | 50-100ms |
| Falsos positivos | <5% | ~2-5% |
| FPS | >20 | 25-30 |
| Uso CPU | <40% | 15-30% |

---

## üèóÔ∏è Arquitectura del Sistema

### Vista de Alto Nivel

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    CAPA DE PRESENTACI√ìN                      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ  GUI OpenCV  ‚îÇ  ‚îÇ  Feedback   ‚îÇ  ‚îÇ   Indicadores   ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ   (Video)    ‚îÇ  ‚îÇ   Visual    ‚îÇ  ‚îÇ   de Estado     ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    CAPA DE NEGOCIO                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ           DetectorGestos (Orquestador)              ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Bucle principal                                  ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Sistema de cooldown                              ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Coordinaci√≥n de componentes                      ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ             ‚îÇ                             ‚îÇ                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ  ‚îÇ  ManejadorSe√±ales   ‚îÇ      ‚îÇ  FuncionesSe√±al     ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ es_paz()         ‚îÇ      ‚îÇ  ‚Ä¢ funcion_es_paz() ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ mano_cerrada()   ‚îÇ      ‚îÇ  ‚Ä¢ funcion_mano...  ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ indice_levant... ‚îÇ      ‚îÇ  ‚Ä¢ funcion_indice() ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ rock()           ‚îÇ      ‚îÇ  ‚Ä¢ funcion_rock()   ‚îÇ      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  CAPA DE SERVICIOS                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ  ‚îÇ  MediaPipe   ‚îÇ  ‚îÇ   OpenCV     ‚îÇ  ‚îÇ  PyAutoGUI   ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  (ML Hands)  ‚îÇ  ‚îÇ  (Captura)   ‚îÇ  ‚îÇ  (Acciones)  ‚îÇ      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  CAPA DE HARDWARE                            ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ  ‚îÇ   Webcam     ‚îÇ  ‚îÇ     CPU      ‚îÇ  ‚îÇ  Sistema OS  ‚îÇ      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Patr√≥n de Dise√±o Aplicado

**Patr√≥n: Strategy + Facade**

- **Strategy:** `ManejadorSe√±ales` define m√∫ltiples algoritmos de detecci√≥n intercambiables
- **Facade:** `DetectorGestos` simplifica la interacci√≥n con subsistemas complejos
- **Command:** Cada gesto mapea a un comando espec√≠fico del SO

---

## üîß Especificaci√≥n de Funcionalidades

### RF-001: Detecci√≥n de Se√±al de Paz ‚úåÔ∏è

**Descripci√≥n:** Detectar cuando el usuario extiende los dedos √≠ndice y medio manteniendo los dem√°s cerrados.

**Criterios de Aceptaci√≥n:**
- √çndice extendido: `landmark[8].y < landmark[5].y`
- Medio extendido: `landmark[12].y < landmark[9].y`
- Anular cerrado: `landmark[16].y >= landmark[13].y`
- Me√±ique cerrado: `landmark[20].y >= landmark[17].y`
- Separaci√≥n dedos: `|landmark[8].x - landmark[12].x| > 0.05`

**Acci√≥n Resultante:** Abrir navegador web con URL `https://www.google.com`

**Prioridad:** Alta  
**Complejidad:** Media

---

### RF-002: Detecci√≥n de Pu√±o Cerrado ‚úä

**Descripci√≥n:** Detectar cuando todos los dedos est√°n cerrados (excepto pulgar libre).

**Criterios de Aceptaci√≥n:**
- √çndice cerrado: `landmark[8].y >= landmark[5].y`
- Medio cerrado: `landmark[12].y >= landmark[9].y`
- Anular cerrado: `landmark[16].y >= landmark[13].y`
- Me√±ique cerrado: `landmark[20].y >= landmark[17].y`

**Acci√≥n Resultante:** 
1. Primera detecci√≥n: `keyDown('alt')` + `press('tab')`
2. Detecciones continuas (< 1s): `press('tab')` solo
3. Sin detecci√≥n > 1s: `keyUp('alt')`

**Comportamiento Especial:** Sistema de Alt+Tab persistente para navegaci√≥n fluida entre ventanas.

**Prioridad:** Alta  
**Complejidad:** Alta (gesti√≥n de estado temporal)

---

### RF-003: Detecci√≥n de √çndice Levantado ‚òùÔ∏è

**Descripci√≥n:** Detectar solo el dedo √≠ndice extendido con pulgar espec√≠ficamente hacia abajo.

**Criterios de Aceptaci√≥n:**
- √çndice extendido: `landmark[8].y < landmark[5].y`
- Medio cerrado: `landmark[12].y >= landmark[9].y`
- Anular cerrado: `landmark[16].y >= landmark[13].y`
- Me√±ique cerrado: `landmark[20].y >= landmark[17].y`
- Pulgar abajo: `landmark[4].y > landmark[8].y`

**Acci√≥n Resultante:** Abrir explorador de archivos en `$HOME` (Linux: `xdg-open`, Windows: `os.startfile`)

**Prioridad:** Media  
**Complejidad:** Media

---

### RF-004: Detecci√≥n de Rock ü§ò

**Descripci√≥n:** Detectar gesto de rock (√≠ndice y me√±ique extendidos, medio y anular cerrados).

**Criterios de Aceptaci√≥n:**
- Medio cerrado: `landmark[12].y >= landmark[9].y`
- Anular cerrado: `landmark[16].y >= landmark[13].y`
- (√çndice y me√±ique: estado libre)

**Acci√≥n Resultante:** 
- **Linux:** `wmctrl` + `xdotool` para maximizar/minimizar
- **Windows:** `Win+Up` / `Win+Down` (doble)
- Alterna entre maximizado/minimizado con cada ejecuci√≥n

**Prioridad:** Media  
**Complejidad:** Alta (multi-plataforma, requiere herramientas externas en Linux)

---

### RF-005: Sistema de Cooldown

**Descripci√≥n:** Prevenir ejecuciones m√∫ltiples accidentales del mismo gesto.

**Par√°metros:**
- Tiempo de espera: 3 segundos (configurable v√≠a `DELAY_SEGUNDOS`)
- Granularidad: Por tipo de gesto (gestos diferentes no interfieren)

**Comportamiento:**
- Al detectar gesto: verificar `time.time() - ultimo_tiempo_ejecucion >= DELAY_SEGUNDOS`
- Si cooldown activo: mostrar contador regresivo en pantalla
- Si cooldown inactivo: ejecutar acci√≥n y registrar timestamp

**Prioridad:** Alta  
**Complejidad:** Baja

---

### RF-006: Feedback Visual en Tiempo Real

**Descripci√≥n:** Proporcionar indicadores visuales del estado del sistema.

**Elementos de UI:**

| Elemento | Posici√≥n | Color | Condici√≥n |
|----------|----------|-------|-----------|
| "Mano detectada" | (10, 30) | Blanco | `multi_hand_landmarks` existe |
| "No hay manos" | (10, 30) | Rojo | `multi_hand_landmarks` es None |
| Nombre de acci√≥n | (10, 70) | Verde | Gesto ejecutado |
| "Espera Xs" | (10, 70) | Naranja | Cooldown activo |
| Landmarks + conexiones | Overlay | Azul/Verde | Mano detectada |

**Prioridad:** Media  
**Complejidad:** Baja

---

### RF-007: Captura y Procesamiento de Video

**Descripci√≥n:** Obtener, procesar y analizar frames de la webcam.

**Pipeline de Procesamiento:**
1. **Captura:** `cv2.VideoCapture(0)` - 30 FPS objetivo
2. **Flip horizontal:** `cv2.flip(frame, 1)` - efecto espejo
3. **Conversi√≥n color:** `cv2.cvtColor(BGR2RGB)` - formato MediaPipe
4. **Detecci√≥n ML:** `hands.process(frame_rgb)` - 21 landmarks por mano
5. **Renderizado:** Dibujo de landmarks + overlay de texto
6. **Display:** `cv2.imshow()` con refresh continuo

**Par√°metros de Calidad:**
- `min_detection_confidence`: 0.7 (70% confianza para nueva detecci√≥n)
- `min_tracking_confidence`: 0.7 (70% confianza para seguimiento)
- `max_num_hands`: 1 (optimizaci√≥n de rendimiento)

**Prioridad:** Cr√≠tica  
**Complejidad:** Media

---

### RF-008: Compatibilidad Multi-Plataforma

**Descripci√≥n:** Adaptar comandos del sistema seg√∫n el OS.

**Detecci√≥n de Plataforma:**
```python
SISTEMA_OPERATIVO = platform.system()  # 'Windows', 'Linux', 'Darwin'
```

**Comandos Espec√≠ficos:**

| Acci√≥n | Windows | Linux | macOS |
|--------|---------|-------|-------|
| Abrir explorador | `os.startfile()` | `xdg-open` | No implementado |
| Maximizar ventana | `Win+Up` | `wmctrl -b add,maximized` | No implementado |
| Minimizar ventana | `Win+Down x2` | `xdotool windowminimize` | No implementado |

**Verificaci√≥n de Dependencias (Linux):**
- Chequeo autom√°tico de `wmctrl` y `xdotool`
- Warning si faltan herramientas
- Instalaci√≥n sugerida: `sudo apt install wmctrl xdotool`

**Prioridad:** Alta  
**Complejidad:** Media

---

## üß© An√°lisis de Componentes

### Componente: ManejadorSe√±ales

**Responsabilidad:** Clasificaci√≥n de gestos mediante an√°lisis geom√©trico.

**Atributos:**
```python
PUNTAS = {
    'pulgar': 4, 'indice': 8, 'medio': 12, 
    'anular': 16, 'menique': 20
}
BASES = {
    'indice': 5, 'medio': 9, 
    'anular': 13, 'menique': 17
}
```

**M√©todos Principales:**

| M√©todo | Entrada | Salida | Complejidad |
|--------|---------|--------|-------------|
| `_esta_dedo_extendido()` | `hand_landmarks`, `nombre_dedo` | `bool` | O(1) |
| `_esta_dedo_doblado()` | `hand_landmarks`, `nombre_dedo` | `bool` | O(1) |
| `es_paz()` | `hand_landmarks` | `bool` | O(1) |
| `mano_cerrada()` | `hand_landmarks` | `bool` | O(n) n=4 |
| `indice_levantado()` | `hand_landmarks` | `bool` | O(1) |
| `rock()` | `hand_landmarks` | `bool` | O(1) |

**Algoritmo de Clasificaci√≥n:**
```
Para cada gesto:
    1. Obtener coordenadas Y de puntas y bases relevantes
    2. Comparar posiciones (punta.y < base.y ‚Üí extendido)
    3. Aplicar l√≥gica booleana seg√∫n criterios del gesto
    4. (Paz) Calcular distancia Euclidiana entre dedos
    5. Retornar True si todos los criterios se cumplen
```

**Complejidad Total:** O(1) por gesto - operaciones constantes

---

### Componente: FuncionesSe√±al

**Responsabilidad:** Ejecuci√≥n de acciones del sistema operativo.

**Gesti√≥n de Estado:**
```python
alt_tab_activo: bool          # Alt est√° presionado
tiempo_ultimo_tab: float      # Timestamp √∫ltima pulsaci√≥n Tab
ventana_maximizada: bool      # Estado actual de ventana
TIEMPO_MANTENER_ALT: float    # Duraci√≥n antes de liberar Alt (1.0s)
```

**M√©todos de Acci√≥n:**

| M√©todo | Tecnolog√≠a | Timeout | Manejo Errores |
|--------|-----------|---------|----------------|
| `funcion_es_paz()` | `webbrowser.open()` | N/A | Autom√°tico por librer√≠a |
| `funcion_mano_cerrada()` | `pyautogui.keyDown/Up()` | N/A | Try-catch impl√≠cito |
| `funcion_indice()` | `subprocess.run()` | N/A | Try-catch + mensaje |
| `funcion_rock()` | `subprocess.run()` | 1s | Try-catch + retry |
| `liberar_alt_tab()` | `pyautogui.keyUp()` | N/A | Verificaci√≥n temporal |

**L√≥gica de Alt+Tab Persistente:**
```python
if not alt_tab_activo OR (tiempo_actual - tiempo_ultimo_tab > 1.0):
    keyDown('alt')
    press('tab')
    alt_tab_activo = True
else:
    press('tab')  # Solo Tab para continuar navegando

# En ausencia de gestos:
if tiempo_actual - tiempo_ultimo_tab > 1.0:
    keyUp('alt')
    alt_tab_activo = False
```

**Complejidad:** O(1) por m√©todo

---

### Componente: DetectorGestos

**Responsabilidad:** Orquestaci√≥n del sistema completo.

**Atributos de Configuraci√≥n:**
```python
gestos = {
    'paz': {
        'detector': manejador_senales.es_paz,
        'funcion': funciones_senal.funcion_es_paz,
        'mensaje': 'Abriendo el navegador'
    },
    # ... otros gestos
}
ultimo_tiempo_ejecucion = {}  # Diccionario de timestamps
```

**Bucle Principal:**
```
Inicializar MediaPipe + VideoCapture
MIENTRAS no presione 'q':
    1. Capturar frame
    2. Flip horizontal (efecto espejo)
    3. Convertir BGR ‚Üí RGB
    4. Procesar con MediaPipe
    5. SI hay landmarks:
        a. Dibujar landmarks en frame
        b. Para cada gesto en orden de prioridad:
            - Ejecutar detector
            - SI detectado Y cooldown OK:
                * Ejecutar funci√≥n asociada
                * Actualizar timestamp
                * Mostrar mensaje verde
            - SI detectado Y cooldown activo:
                * Mostrar contador naranja
    6. SI NO hay landmarks:
        - Liberar Alt+Tab si estaba activo
        - Mostrar "No hay manos"
    7. Renderizar frame con cv2.imshow()
    8. Procesar eventos de teclado
Liberar recursos
```

**Gesti√≥n de Cooldown:**
```python
def puede_ejecutar(nombre_gesto):
    tiempo_actual = time.time()
    ultimo_tiempo = ultimo_tiempo_ejecucion.get(nombre_gesto, 0)
    return tiempo_actual - ultimo_tiempo >= DELAY_SEGUNDOS
```

**Complejidad:** O(n*m) donde n=gestos, m=frames/segundo

---

## üîÑ Flujo de Datos

### Diagrama de Secuencia - Detecci√≥n Exitosa

```
Usuario          Webcam        OpenCV      MediaPipe    ManejadorSe√±ales    FuncionesSe√±al     SO
  ‚îÇ                ‚îÇ              ‚îÇ             ‚îÇ                ‚îÇ                  ‚îÇ           ‚îÇ
  ‚îÇ‚îÄGesto ‚úåÔ∏è‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ              ‚îÇ             ‚îÇ                ‚îÇ                  ‚îÇ           ‚îÇ
  ‚îÇ                ‚îÇ‚îÄ‚îÄFrame‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ             ‚îÇ                ‚îÇ                  ‚îÇ           ‚îÇ
  ‚îÇ                ‚îÇ              ‚îÇ‚îÄRGB Frame‚îÄ‚îÄ‚ñ∂‚îÇ                ‚îÇ                  ‚îÇ           ‚îÇ
  ‚îÇ                ‚îÇ              ‚îÇ             ‚îÇ‚îÄ21 Landmarks‚îÄ‚îÄ‚ñ∂‚îÇ                  ‚îÇ           ‚îÇ
  ‚îÇ                ‚îÇ              ‚îÇ             ‚îÇ                ‚îÇ‚îÄes_paz()‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ           ‚îÇ
  ‚îÇ                ‚îÇ              ‚îÇ             ‚îÇ                ‚îÇ‚óÄ‚îÄTrue‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ           ‚îÇ
  ‚îÇ                ‚îÇ              ‚îÇ             ‚îÇ                ‚îÇ                  ‚îÇ           ‚îÇ
  ‚îÇ                ‚îÇ              ‚îÇ‚îÄpuede_ejecutar('paz')?‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ                  ‚îÇ           ‚îÇ
  ‚îÇ                ‚îÇ              ‚îÇ‚óÄ‚îÄTrue (cooldown OK)‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                  ‚îÇ           ‚îÇ
  ‚îÇ                ‚îÇ              ‚îÇ                               ‚îÇ                  ‚îÇ           ‚îÇ
  ‚îÇ                ‚îÇ              ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄfuncion_es_paz()‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ           ‚îÇ
  ‚îÇ                ‚îÇ              ‚îÇ                               ‚îÇ                  ‚îÇ‚îÄOpen URL‚îÄ‚ñ∂‚îÇ
  ‚îÇ                ‚îÇ              ‚îÇ                               ‚îÇ                  ‚îÇ‚óÄ‚îÄ‚îÄOK‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
  ‚îÇ                ‚îÇ              ‚îÇ                               ‚îÇ                  ‚îÇ           ‚îÇ
  ‚îÇ                ‚îÇ              ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄupdate timestamp‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ                  ‚îÇ           ‚îÇ
  ‚îÇ                ‚îÇ‚óÄ‚îÄDisplay‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                               ‚îÇ                  ‚îÇ           ‚îÇ
  ‚îÇ‚óÄ‚îÄ"Abriendo...‚îÄ‚îÄ‚îÇ              ‚îÇ                               ‚îÇ                  ‚îÇ           ‚îÇ
```

### Diagrama de Secuencia - Cooldown Activo

```
Usuario          DetectorGestos    Sistema Cooldown
  ‚îÇ                    ‚îÇ                  ‚îÇ
  ‚îÇ‚îÄGesto ‚úåÔ∏è (t=0s)‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ                  ‚îÇ
  ‚îÇ                    ‚îÇ‚îÄregister‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ
  ‚îÇ                    ‚îÇ‚óÄ‚îÄejecutar‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
  ‚îÇ                    ‚îÇ                  ‚îÇ
  ‚îÇ‚îÄGesto ‚úåÔ∏è (t=2s)‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ                  ‚îÇ
  ‚îÇ                    ‚îÇ‚îÄcheck‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ
  ‚îÇ                    ‚îÇ‚óÄ‚îÄBLOQUEADO (1s)‚îÄ‚îÄ‚îÇ
  ‚îÇ‚óÄ‚îÄ"Espera 1s"‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                  ‚îÇ
  ‚îÇ                    ‚îÇ                  ‚îÇ
  ‚îÇ‚îÄGesto ‚úåÔ∏è (t=3.5s)‚îÄ‚ñ∂‚îÇ                  ‚îÇ
  ‚îÇ                    ‚îÇ‚îÄcheck‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ
  ‚îÇ                    ‚îÇ‚óÄ‚îÄOK‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
  ‚îÇ                    ‚îÇ‚îÄejecutar‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ
```

---

## üìä Matriz de Dependencias

### Dependencias Directas

```
app.py
‚îú‚îÄ‚îÄ cv2 (opencv-python==4.8.1.78)
‚îÇ   ‚îú‚îÄ‚îÄ VideoCapture()
‚îÇ   ‚îú‚îÄ‚îÄ flip()
‚îÇ   ‚îú‚îÄ‚îÄ cvtColor()
‚îÇ   ‚îú‚îÄ‚îÄ putText()
‚îÇ   ‚îî‚îÄ‚îÄ imshow()
‚îú‚îÄ‚îÄ mediapipe (0.10.8)
‚îÇ   ‚îî‚îÄ‚îÄ solutions.hands
‚îÇ       ‚îú‚îÄ‚îÄ Hands()
‚îÇ       ‚îî‚îÄ‚îÄ drawing_utils
‚îú‚îÄ‚îÄ pyautogui (0.9.54)
‚îÇ   ‚îú‚îÄ‚îÄ keyDown()
‚îÇ   ‚îú‚îÄ‚îÄ keyUp()
‚îÇ   ‚îú‚îÄ‚îÄ press()
‚îÇ   ‚îî‚îÄ‚îÄ hotkey()
‚îú‚îÄ‚îÄ webbrowser (stdlib)
‚îÇ   ‚îî‚îÄ‚îÄ open()
‚îú‚îÄ‚îÄ time (stdlib)
‚îÇ   ‚îî‚îÄ‚îÄ time()
‚îú‚îÄ‚îÄ platform (stdlib)
‚îÇ   ‚îî‚îÄ‚îÄ system()
‚îú‚îÄ‚îÄ os (stdlib)
‚îÇ   ‚îú‚îÄ‚îÄ path
‚îÇ   ‚îú‚îÄ‚îÄ expanduser()
‚îÇ   ‚îî‚îÄ‚îÄ startfile()
‚îî‚îÄ‚îÄ subprocess (stdlib)
    ‚îî‚îÄ‚îÄ run()
```

### Dependencias del Sistema (Linux)

```
Funcionalidad Completa
‚îú‚îÄ‚îÄ wmctrl (gesti√≥n de ventanas)
‚îÇ   ‚îî‚îÄ‚îÄ Requerido para: funcion_rock()
‚îú‚îÄ‚îÄ xdotool (control de ventanas)
‚îÇ   ‚îî‚îÄ‚îÄ Requerido para: funcion_rock()
‚îî‚îÄ‚îÄ xdg-open (abrir archivos)
    ‚îî‚îÄ‚îÄ Requerido para: funcion_indice()
```

### √Årbol de Llamadas

```
main()
‚îî‚îÄ‚îÄ DetectorGestos()
    ‚îú‚îÄ‚îÄ __init__()
    ‚îÇ   ‚îú‚îÄ‚îÄ ManejadorSe√±ales()
    ‚îÇ   ‚îî‚îÄ‚îÄ FuncionesSe√±al()
    ‚îÇ
    ‚îú‚îÄ‚îÄ VideoCapture.read() [loop]
    ‚îÇ
    ‚îú‚îÄ‚îÄ mp_hands.process()
    ‚îÇ
    ‚îú‚îÄ‚îÄ procesar_gesto()
    ‚îÇ   ‚îú‚îÄ‚îÄ puede_ejecutar()
    ‚îÇ   ‚îú‚îÄ‚îÄ ManejadorSe√±ales.es_paz()
    ‚îÇ   ‚îú‚îÄ‚îÄ ManejadorSe√±ales.mano_cerrada()
    ‚îÇ   ‚îú‚îÄ‚îÄ ManejadorSe√±ales.indice_levantado()
    ‚îÇ   ‚îú‚îÄ‚îÄ ManejadorSe√±ales.rock()
    ‚îÇ   ‚îÇ
    ‚îÇ   ‚îî‚îÄ‚îÄ Si detectado y autorizado:
    ‚îÇ       ‚îú‚îÄ‚îÄ FuncionesSe√±al.funcion_es_paz()
    ‚îÇ       ‚îú‚îÄ‚îÄ FuncionesSe√±al.funcion_mano_cerrada()
    ‚îÇ       ‚îú‚îÄ‚îÄ FuncionesSe√±al.funcion_indice()
    ‚îÇ       ‚îî‚îÄ‚îÄ FuncionesSe√±al.funcion_rock()
    ‚îÇ           ‚îú‚îÄ‚îÄ _maximizar_ventana_linux()
    ‚îÇ           ‚îú‚îÄ‚îÄ _minimizar_ventana_linux()
    ‚îÇ           ‚îú‚îÄ‚îÄ _maximizar_ventana_windows()
    ‚îÇ           ‚îî‚îÄ‚îÄ _minimizar_ventana_windows()
    ‚îÇ
    ‚îî‚îÄ‚îÄ liberar_alt_tab()
```

---

## üé≠ Casos de Uso

### CU-001: B√∫squeda Web R√°pida

**Actor:** Usuario final  
**Precondici√≥n:** Sistema iniciado, mano visible  
**Flujo Principal:**
1. Usuario realiza se√±al de paz ‚úåÔ∏è
2. Sistema detecta √≠ndice y medio extendidos
3. Sistema verifica cooldown (‚â•3s desde √∫ltima ejecuci√≥n)
4. Sistema ejecuta `webbrowser.open('https://www.google.com')`
5. Navegador predeterminado se abre con Google
6. Sistema actualiza timestamp y muestra "Abriendo el navegador"

**Flujo Alternativo 3a:** Cooldown activo
- 3a1. Sistema muestra "Espera Xs" con contador regresivo
- 3a2. Usuario mantiene gesto o lo repite despu√©s

**Postcondici√≥n:** Google abierto en nueva pesta√±a/ventana

**Frecuencia Estimada:** 5-10 veces/sesi√≥n

---

### CU-002: Navegaci√≥n entre Aplicaciones

**Actor:** Usuario multitarea  
**Precondici√≥n:** M√∫ltiples ventanas abiertas  
**Flujo Principal:**
1. Usuario cierra el pu√±o ‚úä
2. Sistema detecta todos los dedos cerrados
3. **Primera detecci√≥n:**
   - 3a. Sistema ejecuta `keyDown('alt')` + `press('tab')`
   - 3b. Aparece selector de ventanas del OS
4. **Detecciones continuas (<1s):**
   - 4a. Usuario repite gesto
   - 4b. Sistema ejecuta solo `press('tab')`
   - 4c. Selector avanza a siguiente ventana
5. **Sin detecci√≥n (>1s):**
   - 5a. Sistema ejecuta `keyUp('alt')`
   - 5b. Ventana seleccionada se activa

**Flujo Alternativo 4a:** Usuario suelta gesto prematuramente
- Sistema detecta ausencia de mano
- Se ejecuta `liberar_alt_tab()` inmediatamente
- Selector de ventanas se cierra

**Postcondici√≥n:** Ventana deseada en primer plano

**Frecuencia Estimada:** 20-30 veces/sesi√≥n

---

### CU-003: Acceso a Archivos

**Actor:** Usuario que necesita abrir documentos  
**Precondici√≥n:** Sistema operativo soportado  
**Flujo Principal:**
1. Usuario levanta solo el √≠ndice ‚òùÔ∏è con pulgar abajo
2. Sistema detecta √≠ndice extendido + pulgar abajo
3. Sistema verifica cooldown
4. **Linux:** Sistema ejecuta `subprocess.run(['xdg-open', '$HOME'])`
5. **Windows:** Sistema ejecuta `os.startfile(os.path.expanduser('~'))`
6. Explorador de archivos se abre en directorio home

**Flujo Excepcional 4a:** Dependencias faltantes (Linux)
- 4a1. `xdg-open` no encontrado
- 4a2. Sistema captura FileNotFoundError
- 4a3. Se imprime mensaje de error en consola
- 4a4. No se abre explorador

**Postcondici√≥n:** Explorador de archivos abierto

**Frecuencia Estimada:** 3-8 veces/sesi√≥n

---

### CU-004: Maximizar/Minimizar Ventana

**Actor:** Usuario que gestiona espacio de pantalla  
**Precondici√≥n:** Ventana activa en primer plano  
**Flujo Principal:**
1. Usuario realiza gesto de rock ü§ò
2. Sistema detecta medio y anular cerrados
3. Sistema verifica cooldown
4. Sistema lee estado actual `ventana_maximizada`
5. **Si maximizada:**
   - Linux: `subprocess.run(['xdotool', 'windowminimize', window_id])`
   - Windows: `pyautogui.hotkey('win', 'down')` x2
6. **Si minimizada:**
   - Linux: `subprocess.run(['wmctrl', '-i', '-r', window_id, '-b', 'add,maximized_vert,maximized_horz'])`
   - Windows: `pyautogui.hotkey('win', 'up')`
7. Sistema invierte estado `ventana_maximizada = not ventana_maximizada`

**Flujo Excepcional 5a:** Comando falla (Linux)
- 5a1. `subprocess.run()` lanza TimeoutExpired o FileNotFoundError
- 5a2. Se captura excepci√≥n e imprime error
- 5a3. Estado NO se modifica (operaci√≥n revertida)

**Postcondici√≥n:** Ventana cambia de estado visual

**Frecuencia Estimada:** 5-10 veces/sesi√≥n

---

## üìã Requisitos No Funcionales

### RNF-001: Rendimiento

**Latencia m√°xima de detecci√≥n:** ‚â§100ms desde captura hasta identificaci√≥n del gesto  
**Justificaci√≥n:** Experiencia de usuario fluida requiere feedback inmediato

**FPS m√≠nimo:** 20 frames/segundo  
**Justificaci√≥n:** Percepci√≥n de movimiento suave, detecci√≥n consistente

**Uso m√°ximo de CPU:** 40% en un solo n√∫cleo  
**Justificaci√≥n:** No interferir con otras aplicaciones

**Uso m√°ximo de RAM:** 500 MB  
**Justificaci√≥n:** Compatible con sistemas de gama media/baja

---

### RNF-002: Fiabilidad

**Disponibilidad objetivo:** 99% durante sesi√≥n activa  
**MTBF (Mean Time Between Failures):** >30 minutos de operaci√≥n continua sin errores  
**Tasa de falsos positivos:** <5% de las detecciones  
**Tasa de falsos negativos:** <10% de los gestos realizados

**Recuperaci√≥n ante fallos:**
- P√©rdida de c√°mara: Mensaje de error + terminaci√≥n controlada
- Fallo de MediaPipe: Captura de excepci√≥n + log
- Error en ejecuci√≥n de comando: Try-catch + mensaje + continuar operaci√≥n

---

### RNF-003: Usabilidad

**Curva de aprendizaje:** Usuario nuevo debe dominar los 4 gestos en <5 minutos  
**Intuitividad:** Gestos deben ser naturales y reconocibles culturalmente  
**Feedback:** Todo gesto detectado debe tener indicador visual en <50ms  
**Accesibilidad:** Funcionar con iluminaci√≥n de interiores est√°ndar (200-500 lux)

**Tolerancia a variaciones:**
- √Ångulo de mano: ¬±30¬∞ respecto al plano frontal
- Distancia a c√°mara: 30-100 cm
- Velocidad del gesto: 0.5-3 segundos de duraci√≥n

---

### RNF-004: Mantenibilidad

**Modularidad:** Cada gesto debe poder agregarse/modificarse sin afectar otros  
**Extensibilidad:** Arquitectura permite a√±adir nuevos gestos en <30 min  
**Configurabilidad:** Par√°metros cr√≠ticos deben ser constantes al inicio del archivo  
**Documentaci√≥n:** Todo m√©todo p√∫blico debe tener docstring

**M√©tricas de c√≥digo:**
- Complejidad ciclom√°tica: <10 por m√©todo
- L√≠neas por m√©todo: <50
- Profundidad de anidaci√≥n: <4 niveles

---

### RNF-005: Portabilidad

**Sistemas operativos:** Windows 10/11, Ubuntu 20.04+, Debian 11+, Fedora 35+  
**Versiones de Python:** 3.8, 3.9, 3.10, 3.11  
**Arquitecturas:** x86_64 (AMD64)

**Dependencias externas (Linux):**
- `wmctrl`: Opcional, requerido para funcionalidad completa
- `xdotool`: Opcional, requerido para funcionalidad completa
- Advertencia autom√°tica si faltan herramientas

---

### RNF-006: Seguridad

**Privacidad de video:** Todo procesamiento es local, sin env√≠o a servidores externos  
**Permisos de sistema:** Solo requiere acceso a webcam y simulaci√≥n de teclado  
**Validaci√≥n de entrada:** No se ejecutan comandos shell con input del usuario  
**Timeout de comandos:** M√°ximo 1 segundo para subprocess.run()

**Principio de privilegio m√≠nimo:** No requiere permisos de administrador

---

## üîí Seguridad y Privacidad

### An√°lisis de Amenazas

| Amenaza | Probabilidad | Impacto | Mitigaci√≥n |
|---------|--------------|---------|------------|
| **Acceso no autorizado a c√°mara** | Baja | Alto | Indicador LED de c√°mara, procesamiento local |
| **Ejecuci√≥n de comandos maliciosos** | Muy Baja | Medio | No hay ejecuci√≥n de shell arbitrario |
| **Inyecci√≥n de c√≥digo** | Muy Baja | Alto | No hay eval() ni exec(), comandos hardcodeados |
| **Consumo excesivo de recursos** | Media | Bajo | L√≠mites de FPS y detecci√≥n de una sola mano |
| **Activaci√≥n accidental** | Media | Bajo | Sistema de cooldown de 3 segundos |

### Superficie de Ataque

**Puntos de entrada:**
1. ‚úÖ **Stream de video:** Solo lectura, procesado por MediaPipe (biblioteca confiable)
2. ‚úÖ **Teclas de control:** Solo 'q' para salir (sin peligro)
3. ‚ùå **Red:** No hay conexiones de red (excepto webbrowser que usa navegador por defecto)
4. ‚ùå **Archivos:** No lee/escribe archivos de usuario

**Vector de riesgo m√≠nimo:** El sistema es esencialmente de solo lectura excepto por las acciones predefinidas.

### Cumplimiento de Privacidad

**GDPR/Privacidad:**
- ‚úÖ No recopila datos personales
- ‚úÖ No almacena im√°genes ni videos
- ‚úÖ Procesamiento en tiempo real sin persistencia
- ‚úÖ Usuario tiene control total (puede cerrar con 'q')

**Transparencia:**
- ‚úÖ C√≥digo fuente abierto (open source)
- ‚úÖ Comportamiento documentado
- ‚úÖ Sin telemetr√≠a ni analytics

---

## üìà M√©tricas de Calidad del C√≥digo

### An√°lisis Est√°tico

```python
# Complejidad Ciclom√°tica
ManejadorSe√±ales.es_paz()          : 3  ‚úÖ (simple)
ManejadorSe√±ales.mano_cerrada()    : 2  ‚úÖ (simple)
FuncionesSe√±al.funcion_mano_cerrada() : 4  ‚úÖ (aceptable)
DetectorGestos.procesar_gesto()    : 6  ‚úÖ (aceptable)

# L√≠neas de C√≥digo
Total: ~400 LOC
Comentarios: ~80 l√≠neas (20% - bueno)
Clases: 3 (cohesi√≥n alta)
M√©todos: ~20 (promedio 20 LOC/m√©todo)
```

### M√©tricas de Mantenibilidad

**√çndice de Mantenibilidad:** ~75/100 (bueno)
- ‚úÖ Clases bien definidas con responsabilidades √∫nicas
- ‚úÖ Nombres descriptivos en espa√±ol consistente
- ‚úÖ Constantes configurables al inicio
- ‚ö†Ô∏è Algunos m√©todos podr√≠an tener m√°s documentaci√≥n

**Cobertura de Pruebas:** 0% (no implementadas)
- ‚ö†Ô∏è Recomendaci√≥n: Agregar unit tests para ManejadorSe√±ales
- ‚ö†Ô∏è Recomendaci√≥n: Agregar integration tests para DetectorGestos

---

## üîÑ Diagrama de Estados - Alt+Tab

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  ESTADO INICIAL                      ‚îÇ
‚îÇ             [Alt+Tab Inactivo]                       ‚îÇ
‚îÇ  alt_tab_activo = False                              ‚îÇ
‚îÇ  tiempo_ultimo_tab = 0                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ
              ‚îÇ Detecta Pu√±o ‚úä (primera vez)
              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              ESTADO ALT PRESIONADO                   ‚îÇ
‚îÇ          [Selector de ventanas activo]               ‚îÇ
‚îÇ  Acci√≥n: keyDown('alt') + press('tab')               ‚îÇ
‚îÇ  alt_tab_activo = True                               ‚îÇ
‚îÇ  tiempo_ultimo_tab = time.time()                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ                                       ‚îÇ
       ‚îÇ Detecta Pu√±o ‚úä                       ‚îÇ Sin detecci√≥n
       ‚îÇ (< 1s desde √∫ltimo)                   ‚îÇ durante > 1s
       ‚îÇ                                       ‚îÇ
       ‚ñº                                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  NAVEGANDO VENTANAS     ‚îÇ         ‚îÇ   LIBERANDO ALT      ‚îÇ
‚îÇ  Acci√≥n: press('tab')   ‚îÇ         ‚îÇ Acci√≥n: keyUp('alt') ‚îÇ
‚îÇ  tiempo actualizado     ‚îÇ         ‚îÇ alt_tab_activo=False ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ                                       ‚îÇ
       ‚îÇ Mantiene gesto < 1s                   ‚îÇ
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ (loop) ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                      ‚îÇ
                                      ‚îî‚îÄ‚îÄ‚ñ∂ ESTADO INICIAL
```

---

## üß™ Escenarios de Prueba

### Prueba Funcional PF-001: Detecci√≥n B√°sica

**Objetivo:** Verificar que cada gesto se detecta correctamente en condiciones ideales

**Precondiciones:**
- Iluminaci√≥n: 400 lux
- Distancia: 50 cm
- Fondo: Uniforme, sin patrones
- Sistema: Ubuntu 22.04, Python 3.10

**Pasos:**
1. Iniciar aplicaci√≥n
2. Mostrar se√±al de paz ‚úåÔ∏è durante 1 segundo
3. Esperar 3 segundos
4. Mostrar pu√±o ‚úä durante 1 segundo
5. Esperar 3 segundos
6. Mostrar √≠ndice ‚òùÔ∏è durante 1 segundo
7. Esperar 3 segundos
8. Mostrar rock ü§ò durante 1 segundo

**Resultado Esperado:**
- ‚úÖ Google se abre en navegador (paso 2)
- ‚úÖ Selector Alt+Tab aparece (paso 4)
- ‚úÖ Explorador de archivos se abre (paso 6)
- ‚úÖ Ventana maximiza/minimiza (paso 8)
- ‚úÖ Mensajes visuales correctos en cada detecci√≥n

---

### Prueba de Rendimiento PR-001: FPS bajo Carga

**Objetivo:** Medir frames por segundo con detecci√≥n activa

**Configuraci√≥n:**
- CPU: Intel i5-8250U
- RAM: 8 GB
- Webcam: 720p @ 30 FPS
- Duraci√≥n: 60 segundos

**Mediciones:**
```python
fps_promedio = frames_procesados / tiempo_total
# Objetivo: fps_promedio >= 20
```

**M√©tricas a recolectar:**
- FPS m√≠nimo, m√°ximo, promedio, desviaci√≥n est√°ndar
- Uso de CPU (%)
- Uso de RAM (MB)
- Latencia de detecci√≥n (ms)

---

### Prueba de Estr√©s PE-001: Operaci√≥n Prolongada

**Objetivo:** Verificar estabilidad en uso continuo

**Duraci√≥n:** 30 minutos  
**Actividad:** Realizar gestos aleatorios cada 5-10 segundos

**Criterios de √©xito:**
- ‚úÖ Sin crashes ni excepciones no manejadas
- ‚úÖ Uso de memoria se mantiene estable (<20% crecimiento)
- ‚úÖ FPS no degrada m√°s del 10%
- ‚úÖ Tasa de detecci√≥n se mantiene >90%

---

### Prueba de Compatibilidad PC-001: Multi-Plataforma

**Objetivo:** Verificar funcionamiento en diferentes OS

**Matriz de pruebas:**

| OS | Versi√≥n | Python | Estado | Notas |
|----|---------|--------|--------|-------|
| Ubuntu | 22.04 | 3.10 | ‚úÖ Pasa | Requiere wmctrl/xdotool |
| Debian | 11 | 3.9 | ‚úÖ Pasa | Requiere wmctrl/xdotool |
| Fedora | 38 | 3.11 | ‚úÖ Pasa | Requiere wmctrl/xdotool |
| Windows | 10 | 3.10 | ‚úÖ Pasa | Funcionalidad completa |
| Windows | 11 | 3.11 | ‚úÖ Pasa | Funcionalidad completa |
| macOS | 13+ | 3.10 | ‚ùå Falla | No implementado |

---

## üìö Glosario T√©cnico

**Landmark:** Punto de referencia 3D (x, y, z) que representa una articulaci√≥n o extremo de la mano, detectado por MediaPipe. Total: 21 por mano.

**Cooldown:** Per√≠odo de tiempo durante el cual un gesto no puede volver a ejecutarse, previniendo activaciones m√∫ltiples accidentales.

**Hand Tracking:** Seguimiento continuo de la posici√≥n y forma de la mano en video en tiempo real.

**Flip Horizontal:** Inversi√≥n del frame en eje vertical para crear efecto espejo, mejorando la intuitividad del usuario.

**Confianza de Detecci√≥n:** Valor entre 0.0 y 1.0 que indica la certeza de MediaPipe sobre la presencia de una mano.

**Confianza de Seguimiento:** Valor entre 0.0 y 1.0 que indica la certeza de MediaPipe al seguir una mano ya detectada.

**Clasificaci√≥n Geom√©trica:** Algoritmo que determina el tipo de gesto analizando las posiciones relativas de landmarks sin Machine Learning adicional.

**Alt+Tab Persistente:** T√©cnica que mantiene la tecla Alt presionada para permitir navegaci√≥n continua entre ventanas con m√∫ltiples pulsaciones de Tab.

**wmctrl:** Herramienta de l√≠nea de comandos para controlar ventanas en entornos X11 (Linux).

**xdotool:** Utilidad para simular input de teclado/mouse y manipular ventanas en X11 (Linux).

**FPS (Frames Per Second):** Cantidad de frames procesados por segundo. Mayor FPS = experiencia m√°s fluida.

**Latencia de Detecci√≥n:** Tiempo transcurrido desde que el usuario realiza el gesto hasta que el sistema lo reconoce.

**BGR/RGB:** Espacios de color. OpenCV usa BGR (Blue-Green-Red), MediaPipe requiere RGB (Red-Green-Blue).

---

## üîÆ Roadmap de Mejoras

### Versi√≥n 1.1 (Corto Plazo)

**Funcionalidades:**
- ‚ú® A√±adir gesto "Mano Abierta" (üñêÔ∏è) para minimizar todas las ventanas
- ‚ú® A√±adir gesto "Pulgar Arriba" (üëç) para control de volumen
- ‚öôÔ∏è Interfaz de configuraci√≥n en ventana separada (Tkinter)
- üìä Estad√≠sticas de uso (gestos m√°s frecuentes)

**T√©cnicas:**
- üîß Refactorizar detecci√≥n de dedos extendidos (reducir c√≥digo duplicado)
- üß™ Implementar suite de unit tests (pytest)
- üìù A√±adir logging estructurado (m√≥dulo logging)

---

### Versi√≥n 1.5 (Mediano Plazo)

**Funcionalidades:**
- üéØ Detecci√≥n de gestos din√°micos (movimientos, no solo poses est√°ticas)
- üñ±Ô∏è Control de cursor con dedo √≠ndice
- üîä Feedback auditivo opcional (sonidos de confirmaci√≥n)
- üì∑ Soporte para m√∫ltiples manos simult√°neas

**T√©cnicas:**
- ü§ñ Entrenar clasificador ML custom para gestos complejos
- üé® Interfaz gr√°fica moderna (PyQt/Kivy)
- üíæ Persistencia de configuraci√≥n (JSON/YAML)

---

### Versi√≥n 2.0 (Largo Plazo)

**Funcionalidades:**
- üåê Plugin system para gestos personalizados
- üì± App m√≥vil como control remoto (socket communication)
- üéÆ Perfiles por aplicaci√≥n (diferentes gestos seg√∫n app activa)
- üß† Aprendizaje de gestos personalizados del usuario

**T√©cnicas:**
- ‚òÅÔ∏è Opcional: Sincronizaci√≥n de configuraci√≥n en la nube
- üîå API REST para integraci√≥n con otros sistemas
- üìä Dashboard web de analytics
- üçé Soporte completo para macOS

---

## üìû Informaci√≥n de Soporte

### Repositorio y Documentaci√≥n

**C√≥digo Fuente:** (Pendiente de publicar en GitHub)  
**Documentaci√≥n:** Este documento + README.md  
**Issues:** (GitHub Issues una vez publicado)  
**Contribuciones:** Open source, aceptamos Pull Requests

---

### Licencia

**Tipo:** MIT License  
**Derechos:** Uso comercial y privado permitido  
**Condiciones:** Mantener copyright notice  
**Limitaciones:** Sin garant√≠a, sin responsabilidad

---

### Cr√©ditos y Atribuciones

**Desarrollador Principal:** [Tu Nombre]  
**Frameworks Utilizados:**
- MediaPipe - Google LLC
- OpenCV - OpenCV Team
- PyAutoGUI - Al Sweigart

**Fecha de Creaci√≥n:** Octubre 2024  
**√öltima Actualizaci√≥n:** Octubre 2024  
**Versi√≥n del Documento:** 1.0

---

## üìã Checklist de Implementaci√≥n

### Para Desarrolladores que Extienden el Sistema

**A√±adir un Nuevo Gesto:**

- [ ] Definir criterios de detecci√≥n (qu√© dedos extendidos/cerrados)
- [ ] Implementar m√©todo detector en `ManejadorSe√±ales`
- [ ] Implementar m√©todo de acci√≥n en `FuncionesSe√±al`
- [ ] Registrar en diccionario `gestos` de `DetectorGestos`
- [ ] Probar en condiciones ideales y adversas
- [ ] Documentar en README.md
- [ ] Actualizar diagrama de arquitectura

**Modificar Par√°metros de Rendimiento:**

- [ ] Identificar constante relevante (inicio de app.py)
- [ ] Modificar valor gradualmente
- [ ] Medir impacto en FPS y latencia
- [ ] Documentar cambio si es significativo
- [ ] Considerar exponer en interfaz de configuraci√≥n

**A√±adir Soporte para Nuevo OS:**

- [ ] Detectar OS con `platform.system()`
- [ ] Investigar comandos nativos equivalentes
- [ ] Implementar m√©todos espec√≠ficos en `FuncionesSe√±al`
- [ ] A√±adir verificaci√≥n de dependencias
- [ ] Probar en m√°quina real (no VM)
- [ ] Actualizar matriz de compatibilidad

---

## üéì Conclusiones

### Fortalezas del Sistema

‚úÖ **Arquitectura limpia y modular** - F√°cil de entender y extender  
‚úÖ **Bajo acoplamiento** - Componentes independientes y reutilizables  
‚úÖ **Rendimiento eficiente** - Procesamiento en tiempo real sin retrasos  
‚úÖ **Privacidad total** - Sin env√≠o de datos, procesamiento local  
‚úÖ **Multiplataforma** - Windows y Linux soportados

### √Åreas de Mejora

‚ö†Ô∏è **Testing:** Sin cobertura de pruebas automatizadas  
‚ö†Ô∏è **Configuraci√≥n:** Par√°metros hardcodeados, sin GUI de config  
‚ö†Ô∏è **Gestos Din√°micos:** Solo detecta poses est√°ticas, no movimientos  
‚ö†Ô∏è **macOS:** Sin soporte actualmente  
‚ö†Ô∏è **Documentaci√≥n:** Faltan diagramas UML detallados

### Viabilidad de Producci√≥n

**Uso Personal/Educativo:** ‚úÖ Listo para usar  
**Uso Empresarial:** ‚ö†Ô∏è Requiere m√°s testing y logging robusto  
**Producto Comercial:** ‚ùå Necesita interfaz gr√°fica, instalador, soporte

### Recomendaciones Finales

1. **Prioridad Alta:** Implementar suite de unit tests
2. **Prioridad Media:** A√±adir interfaz de configuraci√≥n GUI
3. **Prioridad Media:** Implementar logging estructurado
4. **Prioridad Baja:** Soporte para macOS
5. **Prioridad Baja:** Sistema de plugins para gestos custom

---

**Fin del Documento T√©cnico**

*Este documento es un an√°lisis exhaustivo del sistema actual y debe actualizarse con cada versi√≥n mayor.*
